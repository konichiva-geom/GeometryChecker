A in BC <=> not A in BC
A in segment BC => A in BC, A in ray BC
//чтобы это работало, нужно идти в обратную сторону. Представим, что хотим A in BC, имея A in ray BC.

A in ray BC => A in BC
AB || CD, any C, any D, C != A, C != B, D != A, D != B, CD || EF => AB || EF
// merging lines
A in BC => AB == BC, BC == AC
AB ∩ CD, any K, any M, K in AB, M in AB, K in CD, M in CD => AB == CD // a
A == B, any C => AC == BC
// Проходим по всем правым частям (после =>) и ищем A in ray BC. Где нашли, смотрим, какие отношения нужны.
// Проверяем, знаем ли мы их.
// any - конструкция, начинающая перебор. Хочется, чтобы после any